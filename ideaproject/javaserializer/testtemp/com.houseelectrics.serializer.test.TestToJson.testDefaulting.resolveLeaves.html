<html>
    <script>
    
var _typeAlias2LeafDefaults_ = 
  {_id_:0 ,_t_:'_2', _0:
    {_id_:1 ,_t_:'_3', fullClassName:"com.houseelectrics.serializer.test.TestToJson$ManyDefaultsTestData$StringValues", propertyName2DefaultValue:
      {_id_:2 ,_t_:'_2', str2:"bcdefghijklmno", str1:"abcdefghijk", str3:null, aReallyReallyReallyLongName:"John Malcom Eldritch Ebeneezer Ozwald Smith"}
    }
  , _1:
    {_id_:3 ,_t_:'_3', fullClassName:"com.houseelectrics.serializer.test.TestToJson$ManyDefaultsTestData", propertyName2DefaultValue:
      {_id_:4 ,_t_:'_2', i4:432102345, i2:23456789, i1:123456789}
    }
  }
;
function _resolveLeafDefaults(o)
{
    if (o._visited_) return o;
    var typeAlias = o._t_;
    if (!typeAlias) return o;
    for (p in o)
    {
        if (p=='_t_') continue;
        var val = o[p];
        // if its an array iterate and explore
        if (typeof(val._a_)!='undefined')
        {
            for (var done=0; done<val.length; done++)
            {
                _resolveLeafDefaults(val[done]);
            }
            continue;
        }
        else
        {
            if (val._t_)
            {
                _resolveLeafDefaults(o[p]);
            }

        }
    }
    var _type2Defaults_ = _typeAlias2LeafDefaults_[typeAlias].propertyName2DefaultValue;
    // do the defaults
    for (var p in _type2Defaults_)
    {
        if (typeof(o[p])==='undefined') {o[p]=_type2Defaults_[p];}
    }
    o._visited_=true;
    return o;
}

//mark array so browser specific testing is not required
function _a_(arr) {arr._a_='y'; return arr;}

function attachId2Array(id, arr) {arr._id_=id; arr._a_='y'; return arr;}

var defaulted=_resolveLeafDefaults(
  {_id_:0 ,_t_:'_1', i2:6789, stringValues:
    {_id_:1 ,_t_:'_0'}
  , stringValuesArr:
    attachId2Array(2,[
      {_id_:3 ,_t_:'_0'}
    , 
      {_id_:4 ,_t_:'_0'}
    , 
      {_id_:5 ,_t_:'_0'}
    ])
  }
);

</script>
    <body>
<pre>
defaulted=>_resolveLeafDefaults(
  {_id_:0 ,_t_:'_1', i2:6789, stringValues:
    {_id_:1 ,_t_:'_0'}
  , stringValuesArr:
    attachId2Array(2,[
      {_id_:3 ,_t_:'_0'}
    , 
      {_id_:4 ,_t_:'_0'}
    , 
      {_id_:5 ,_t_:'_0'}
    ])
  }
)
defaulted.stringValues.str1==<script>document.write(defaulted.stringValues.str1)</script>
defaulted.stringValues.str3==<script>document.write(defaulted.stringValues.str3)</script>
defaulted.stringValues.str2==<script>document.write(defaulted.stringValues.str2)</script>
defaulted.stringValuesArr[0].str1==<script>document.write(defaulted.stringValuesArr[0].str1)</script>
defaulted.i4==<script>document.write(defaulted.i4)</script>
defaulted.i2==<script>document.write(defaulted.i2)</script>
defaulted.i1==<script>document.write(defaulted.i1)</script>

</pre>
