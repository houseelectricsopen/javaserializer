<html>
    <script>
    
var _typeAlias2LeafDefaults_ = 
  {_t_:'_2', _0:
    {_t_:'_3', fullClassName:"com.houseelectrics.serializer.test.TestToJson$ManyDefaultsTestData$StringValues", propertyName2DefaultValue:
      {_t_:'_2', str2:"bcdefghijklmno", str1:"abcdefghijk", str3:null, aReallyReallyReallyLongName:"John Malcom Eldritch Ebeneezer Ozwald Smith"}
    }
  , _1:
    {_t_:'_3', fullClassName:"com.houseelectrics.serializer.test.TestToJson$ManyDefaultsTestData", propertyName2DefaultValue:
      {_t_:'_2', i4:432102345, i2:23456789, i1:123456789}
    }
  }
;
function _resolveLeafDefaults(o)
{
    if (o._visited_) return o;
    var typeAlias = o._t_;
    if (!typeAlias) return o;
    for (p in o)
    {
        if (p=='_t_') continue;
        var val = o[p];
        // if its an array iterate and explore
        if (typeof(val._a_)!='undefined')
        {
            for (var done=0; done<val.length; done++)
            {
                _resolveLeafDefaults(val[done]);
            }
            continue;
        }
        else
        {
            if (val._t_)
            {
                _resolveLeafDefaults(o[p]);
            }

        }
    }
    var _type2Defaults_ = _typeAlias2LeafDefaults_[typeAlias].propertyName2DefaultValue;
    // do the defaults
    for (var p in _type2Defaults_)
    {
        if (typeof(o[p])==='undefined') {o[p]=_type2Defaults_[p];}
    }
    o._visited_=true;
    return o;
}

//mark array so browser specific testing is not required
function _a_(arr) {arr._a_='y'; return arr;}

var defaulted=_resolveLeafDefaults(
  {_t_:'_1', stringValues:
    {_t_:'_0'}
  , stringValuesArr:
    _a_([
      {_t_:'_0'}
    , 
      {_t_:'_0'}
    , 
      {_t_:'_0'}
    ])
  }
);

</script>
    <body>
<pre>
defaulted=>_resolveLeafDefaults(
  {_t_:'_1', stringValues:
    {_t_:'_0'}
  , stringValuesArr:
    _a_([
      {_t_:'_0'}
    , 
      {_t_:'_0'}
    , 
      {_t_:'_0'}
    ])
  }
)
defaulted.stringValuesArr[1].str2==<script>document.write(defaulted.stringValuesArr[1].str2)</script>
defaulted.stringValuesArr[2].aReallyReallyReallyLongName==<script>document.write(defaulted.stringValuesArr[2].aReallyReallyReallyLongName)</script>

</pre>
